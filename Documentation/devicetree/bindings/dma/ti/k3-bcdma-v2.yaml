# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (C) 2024-2025 Texas Instruments Incorporated
# Author: Sai Sree Kartheek Adivi <s-adivi@ti.com>
%YAML 1.2
---
$id: http://devicetree.org/schemas/dma/ti/k3-bcdma-v2.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Texas Instruments K3 DMSS BCDMA V2

maintainers:
  - Sai Sree Kartheek Adivi <s-adivi@ti.com>

description: |
  The BCDMA V2 is intended to perform similar functions as the TR
  mode channels of K3 UDMA-P.
  BCDMA V2 includes block copy channels and Split channels.

  Block copy channels mainly used for memory to memory transfers, but with
  optional triggers a block copy channel can service peripherals by accessing
  directly to memory mapped registers or area.

  Split channels can be used to service PSI-L based peripherals.
  The peripherals can be PSI-L native or legacy, non PSI-L native peripherals
  with PDMAs. PDMA is tasked to act as a bridge between the PSI-L fabric and the
  legacy peripheral.

allOf:
  - $ref: /schemas/dma/dma-controller.yaml#

properties:
  compatible:
    const: ti,am62l-dmss-bcdma

  reg:
    items:
      - description: BCDMA Control /Status Registers region
      - description: Block Copy Channel Realtime Registers region
      - description: Channel Realtime Registers region
      - description: Ring Realtime Registers region

  reg-names:
    items:
      - const: gcfg
      - const: bchanrt
      - const: chanrt
      - const: ringrt

  "#dma-cells":
    const: 4
    description: |
      cell 1: Trigger type for the channel
        0 - disable / no trigger
        1 - internal channel event
        2 - external signal
        3 - timer manager event

      cell 2: parameter for the trigger:
        if cell 1 is 0 (disable / no trigger):
          Unused, ignored
        if cell 1 is 1 (internal channel event):
          channel number whose TR event should trigger the current channel.
        if cell 1 is 2 or 3 (external signal or timer manager event):
          index of global interfaces that come into the DMA.

          Please refer to the device documentation for global interface indexes.

      cell 3: Channel number for the peripheral

        Please refer to the device documentation for the channel map.

      cell 4: ASEL value for the channel

required:
  - compatible
  - "#dma-cells"
  - reg
  - reg-names

unevaluatedProperties: false

examples:
  - |+
    cbass_main {
        #address-cells = <2>;
        #size-cells = <2>;

      main_bcdma: dma-controller@485c4000 {
          compatible = "ti,am62l-dmss-bcdma";
          reg = <0x00 0x485c4000 0x00 0x4000>,
                <0x00 0x48880000 0x00 0x10000>,
                <0x00 0x48800000 0x00 0x80000>,
                <0x00 0x47000000 0x00 0x200000>;
          reg-names = "gcfg", "bchanrt", "chanrt", "ringrt";
          #dma-cells = <4>;
        };
    };
