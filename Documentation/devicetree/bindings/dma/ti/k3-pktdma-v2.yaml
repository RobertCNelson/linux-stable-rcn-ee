# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (C) 2024-2025 Texas Instruments Incorporated
# Author: Sai Sree Kartheek Adivi <s-adivi@ti.com>
%YAML 1.2
---
$id: http://devicetree.org/schemas/dma/ti/k3-pktdma-v2.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Texas Instruments K3 DMSS PKTDMA V2

maintainers:
  - Sai Sree Kartheek Adivi <s-adivi@ti.com>

description: |
  The PKTDMA V2 is intended to perform similar functions as the packet
  mode channels of K3 UDMA-P.
  PKTDMA V2 only includes Split channels to service PSI-L based peripherals.

  The peripherals can be PSI-L native or legacy, non PSI-L native peripherals
  with PDMAs. PDMA is tasked to act as a bridge between the PSI-L fabric and the
  legacy peripheral.

allOf:
  - $ref: /schemas/dma/dma-controller.yaml#

properties:
  compatible:
    const: ti,am62l-dmss-pktdma

  "#dma-cells":
    const: 2
    description: |
      cell 1: Channel number for the peripheral

        Please refer to the device documentation for the channel map.

      cell 2: ASEL value for the channel

  reg:
    items:
      - description: Packet DMA Control /Status Registers region
      - description: Channel Realtime Registers region
      - description: Ring Realtime Registers region

  reg-names:
    items:
      - const: gcfg
      - const: chanrt
      - const: ringrt

required:
  - compatible
  - "#dma-cells"
  - reg
  - reg-names

unevaluatedProperties: false

examples:
  - |+
    cbass_main {
        #address-cells = <2>;
        #size-cells = <2>;

      main_pktdma: dma-controller@485c0000 {
        compatible = "ti,am62l-dmss-pktdma";
        reg = <0x00 0x485c0000 0x00 0x4000>,
          <0x00 0x48900000 0x00 0x80000>,
          <0x00 0x47200000 0x00 0x100000>;
        reg-names = "gcfg", "chanrt", "ringrt";
        #dma-cells = <2>;
      };
    };
